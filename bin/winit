#!/usr/bin/env zsh

#xrandr-auto || :
#wm || :

function gnome-settings-daemon {
	if (( ${+commands[gnome-settings-daemon]} )); then
		command gnome-settings-daemon &
	else
		for i in /usr/lib/gnome-settings-daemon/gsd*; do
			killall -u $USER ${i:?}
			$i &
		done
	fi
}

inputplug -d -0 -c $HOME/.config/inputplug/hook &

tkbd &
ckb --background &
compton &

#xsettingsd &
gnome-settings-daemon

gnome-keyring-daemon &
seahorse-daemon &

/usr/lib/gcr/gcr-prompter &
/usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1 &
#/usr/lib/x86_64-linux-gnu/libexec/kdeconnectd &

#sleep 1

tint2 &

sleep 1

nm-applet &
usbguard-applet-qt &
pasystray &
variety &
#gpomme &
parcellite &
#winswitch_applet &
indicator-kdeconnect &
yubioath-gui &
easystroke &
notify-proxy &

(( ! ${+commands[wal]} )) \
  || wal -i $(< $HOME/.cache/wal/wal)

#xdg-autostart &

wait
