#!/usr/bin/env zsh

#xrandr-auto || :
# xrandr-auto2 || :
#wm || :
nvidia-settings -l &

function gnome-settings-daemon {
	if (( ${+commands[gnome-settings-daemon]} )); then
		command gnome-settings-daemon &
	else
		for i in /usr/lib/gnome-settings-daemon/gsd*(*); do
			case $i in
				*-locate-pointer) continue ;;
			esac

			killall -u $USER ${i:?} || :
			$i &
		done
	fi
}

inputplug -d -0 -c $HOME/.config/inputplug/hook &
#imwheel -b '4 5 6 7' -k -p -r -d &
#tkbd &

#xsettingsd &
gnome-settings-daemon

gnome-keyring-daemon &
# seahorse-daemon &

# /usr/lib/gcr/gcr-prompter &
# /usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1 &
#/usr/lib/x86_64-linux-gnu/libexec/kdeconnectd &

#sleep 1

# tint2 &

sleep 1

ckb --background &
nm-applet &
usbguard-applet-qt &
pasystray &
#gpomme &
parcellite &
#winswitch_applet &
# indicator-kdeconnect &
# notify-proxy &

#fcitx-autostart &
#/usr/lib/at-spi2-core/at-spi-bus-launcher --launch-immediately &

# yubioath gui -t &
# easystroke &
#kupfer &

variety &
# sleep 5 && solaar &
#(( ! ${+commands[wal]} )) \
#  || wal -i $(< $HOME/.cache/wal/wal)

#xdg-autostart &

wait
