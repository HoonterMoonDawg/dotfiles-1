#!/bin/zsh
set -exv

yadm pull

if [[ ${+functions[antibody]} ]]; then
	command antibody update &
elif [[ ${+functions[zplug]} ]]; then
	zplug update
fi

vim=${commands[nvim]-${commands[vim]}}
if [[ -n $vim ]]; then
	update-neovim-venv &
fi

case $OSTYPE:l in
	linux*)
		sudo apt update -qq &
		;;

	darwin*)
		brew update >/dev/null &
		;;
esac

wait

case $OSTYPE:l in
	linux*)
		sudo apt upgrade -y
		;;

	darwin*)
		brew upgrade --fetch-HEAD || :
		;;
esac

if [[ -n $vim ]]; then
	$vim -c 'Update'
fi

#if [[ ${+commands[tmux]} ]]; then
#	 :
#fi

#if [[ -n "$GOPATH" ]]; then
#	 go get -u -v all || :
#fi

