#!/bin/zsh
set -exv

yadm pull

case $OSTYPE:l in
    linux*)
        sudo apt update -qq &
        ;;

    darwin*)
        brew update >/dev/null &
        ;;
esac

wait

case $OSTYPE:l in
    linux*)
        sudo apt full-upgrade -y
        ;;

    darwin*)
        brew upgrade --fetch-HEAD || :
        ;;
esac

#if [[ ${+functions[zplug]} ]]; then
#    zplug update
#    zsh-clean-cache
#fi

vim=${commands[nvim]-${commands[vim]}}
if [[ -n $vim ]]; then
    $vim -c 'Update'
fi

#if [[ ${+commands[tmux]} ]]; then
#    :
#fi

#if [[ -n "$GOPATH" ]]; then
#    go get -u -v all || :
#fi

